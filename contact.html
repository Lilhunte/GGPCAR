<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contacto | GGPCAR</title>
    <link rel="stylesheet" href="./style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-900">
    <!-- Header Moderno com Navbar Centralizada -->
    <header class="header-bg relative overflow-hidden">
      <nav
        class="navbar fixed top-0 left-0 w-full z-20 bg-white backdrop-blur-md shadow"
      >
        <div
          class="max-w-7xl mx-auto flex items-center justify-center px-4 py-3"
        >
          <ul
            class="flex-col md:flex-row md:flex hidden md:!flex bg-white md:bg-transparent md:static absolute w-full left-0 top-16 md:top-0 z-50 shadow md:shadow-none rounded-b-xl md:rounded-none justify-center items-center md:relative md:mx-auto"
          >
            <li>
              <a
                href="index.html"
                class="block px-6 py-3 md:p-0 text-gray-900 hover:text-blue-400 transition font-semibold"
                >Início</a
              >
            </li>
            <li>
              <a
                href="product.html"
                class="block px-6 py-3 md:p-0 text-gray-900 hover:text-blue-400 transition font-semibold"
                >Viaturas</a
              >
            </li>
            <li>
              <a
                href="about.html"
                class="block px-6 py-3 md:p-0 text-gray-900 hover:text-blue-400 transition font-semibold"
                >Sobre</a
              >
            </li>
            <li>
              <a
                href="contact.html"
                class="block px-6 py-3 md:p-0 text-blue-600 font-bold"
                >Contacto</a
              >
            </li>
          </ul>
        </div>
      </nav>
      <div
        class="relative w-full h-[220px] md:h-[300px] flex items-center justify-center mt-16"
      >
        <img
          src="./header-image.JPG"
          alt="Banner GGPCAR"
          class="absolute inset-0 w-full h-full object-cover blur-md"
          style="z-index: 1"
        />
        <div class="relative z-10 flex flex-col items-center w-full">
          <div class="flex items-center gap-4 mt-10 md:mt-16">
            <span
              class="text-4xl md:text-6xl font-extrabold text-white drop-shadow-lg animate-fade-in-down"
            >
              GGPC<span
                class="header-title-2 ml-1 animate-pulse text-orange-400"
                >AR</span
              >
            </span>
          </div>
        </div>
      </div>
      <div class="header-container relative overflow-hidden bg-gray-900 py-4">
        <div class="flex justify-center items-center">
          <svg
            class="animate-bounce-down w-12 h-12 text-white"
            fill="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19.14 8.76l-1.57-2.67C16.96 5.48 16.27 5 15.5 5H8.5c-.77 0-1.46.48-2.07 1.09L4.86 8.76C4.34 9.61 4 10.59 4 11.62V18c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2v-2h4v2c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2v-6.38c0-1.03-.34-2.01-.86-2.86zM6.85 7h10.3c.27 0 .5.18.6.44l1.39 2.37c.18.3.26.63.26.98v3.21H5.2l.02-3.21c0-.35.08-.68.26-.98l1.39-2.37c.1-.26.33-.44.6-.44zM8 16c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm8 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"
            ></path>
          </svg>
        </div>
      </div>

      <style>
        @keyframes bounce-down {
          0%,
          100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(
              10px
            ); /* Adjust the bounce height as needed */
          }
        }

        .animate-bounce-down {
          animation: bounce-down 2s infinite; /* Adjust duration and iteration as needed */
        }
      </style>
    </header>

    <main class="max-w-3xl mx-auto px-4 py-16">
      <section class="mb-12">
        <h2 class="text-3xl font-bold text-blue-700 mb-4">Fale connosco</h2>
        <p class="text-lg text-gray-700 mb-6">
          Tem dúvidas, precisa de suporte ou quer agendar um test-drive? Utilize
          os nossos contactos ou preencha o formulário abaixo!
        </p>
        <!-- Formulário moderno com EmailJS -->
        <form
          id="contact-form"
          class="space-y-6 bg-gray-50 p-8 rounded-xl shadow-lg animate-fade-in mb-10"
          autocomplete="off"
        >
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label
                for="from_name"
                class="block text-gray-700 font-semibold mb-2"
                >Nome completo*</label
              >
              <input
                type="text"
                id="from_name"
                name="from_name"
                required
                class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"
                placeholder="O seu nome"
              />
            </div>
            <div>
              <label
                for="reply_to"
                class="block text-gray-700 font-semibold mb-2"
                >Email*</label
              >
              <input
                type="email"
                id="reply_to"
                name="reply_to"
                required
                class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"
                placeholder="O seu email"
              />
            </div>
          </div>
          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label for="phone" class="block text-gray-700 font-semibold mb-2"
                >Telemóvel*</label
              >
              <input
                type="tel"
                id="phone"
                name="phone"
                required
                class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"
                placeholder="O seu número"
              />
            </div>
            <div>
              <label
                for="car_model"
                class="block text-gray-700 font-semibold mb-2"
                >Viatura de Interesse*</label
              >
              <select
                id="car_model"
                name="car_model"
                required
                class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"
              >
                <option value="">Selecione uma viatura</option>
                <option>Peugeot 308 2016-03</option>
                <option>Opel Astra K sport 2017-03</option>
                <option>BMW SERIE-4 418D 2016-03</option>
                <option>Outro</option>
              </select>
            </div>
          </div>
          <div>
            <label for="message" class="block text-gray-700 font-semibold mb-2"
              >Mensagem*</label
            >
            <textarea
              id="message"
              name="message"
              rows="4"
              required
              class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition"
              placeholder="A sua mensagem"
            ></textarea>
          </div>
          <div class="flex items-center justify-center">
            <button
              type="submit"
              id="submit-btn"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-10 rounded-lg text-lg transition flex items-center gap-2"
            >
              <svg
                id="spinner"
                class="hidden animate-spin h-5 w-5 text-white"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8v8z"
                ></path>
              </svg>
              <span id="submit-text">Enviar</span>
            </button>
          </div>
          <div id="form-message" class="text-center text-lg mt-4"></div>
        </form>

        <div class="bg-gray-50 rounded-xl shadow p-6">
          <h3 class="text-xl font-semibold text-blue-600 mb-2">
            Informações de Contacto
          </h3>
          <p class="mb-1">
            <strong>Email:</strong>
            <a
              href="mailto:canoutlethelp@gmail.com"
              class="text-blue-500 hover:underline"
              >rui.castelo@sapo.pt</a
            >
          </p>
          <p class="mb-1">
            <strong>Telemóvel:</strong>
            <a href="tel:+351916656266" class="text-blue-500 hover:underline"
              >+351 916 656 266</a
            >
          </p>
          <p class="mb-1">
            <strong>Morada:</strong> Avenida Diogo de Azambuja, nº 471, 3140-274
            Montemor-o-Velho
          </p>
          <div class="flex gap-4 mt-2">
            <a
              href="https://www.facebook.com/ggpcar"
              aria-label="Facebook"
              class="hover:text-blue-500"
              ><svg
                class="w-5 h-5 inline"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M22 12.07C22 6.48 17.52 2 12 2S2 6.48 2 12.07c0 5 3.66 9.13 8.44 9.93v-7.03h-2.54v-2.9h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.45h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.9h-2.34v7.03C18.34 21.2 22 17.07 22 12.07z"
                /></svg
            ></a>
            <a
              href="https://www.instagram.com/ggpcar_"
              aria-label="Instagram"
              class="hover:text-pink-500"
              ><svg
                class="w-5 h-5 inline"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zm4.25 3.25a5.25 5.25 0 1 1 0 10.5 5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5zm5.13.88a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"
                /></svg
            ></a>
          </div>
        </div>
      </section>
    </main>

    <footer class="bg-gray-900 text-gray-200 py-10 mt-10">
      <div
        class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-8"
      >
        <div class="flex flex-col items-center md:items-start">
          <span class="text-3xl font-bold text-blue-500"
            >GGP<span class="text-orange-500">CAR</span></span
          >
          <p class="mt-2 text-sm text-gray-400">
            A sua concessionária premium de confiança.
          </p>
        </div>
        <div>
          <ul
            class="flex flex-col md:flex-row gap-4 md:gap-8 text-lg font-semibold"
          >
            <li>
              <a href="index.html" class="hover:text-blue-400 transition"
                >Início</a
              >
            </li>
            <li>
              <a href="product.html" class="hover:text-blue-400 transition"
                >Viaturas</a
              >
            </li>
            <li>
              <a href="about.html" class="hover:text-blue-400 transition"
                >Sobre</a
              >
            </li>
            <li>
              <a href="contact.html" class="hover:text-blue-400 transition"
                >Contacto</a
              >
            </li>
          </ul>
        </div>
        <div class="text-center md:text-right">
          <p class="font-semibold">Contacte-nos</p>
          <p>
            Email:
            <a
              href="mailto:canoutlethelp@gmail.com"
              class="text-blue-400 hover:underline"
              >rui.castelo@sapo.pt</a
            >
          </p>
          <p>
            Telemóvel:
            <a href="tel:+351916656266" class="text-blue-400 hover:underline"
              >+351 916 656 266</a
            >
          </p>
          <div class="flex justify-center md:justify-end gap-4 mt-2">
            <a
              href="https://www.facebook.com/ggpcar"
              aria-label="Facebook"
              class="hover:text-blue-500"
              ><svg
                class="w-5 h-5 inline"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M22 12.07C22 6.48 17.52 2 12 2S2 6.48 2 12.07c0 5 3.66 9.13 8.44 9.93v-7.03h-2.54v-2.9h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.45h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.9h-2.34v7.03C18.34 21.2 22 17.07 22 12.07z"
                /></svg
            ></a>
            <a
              href="https://www.instagram.com/ggpcar_"
              aria-label="Instagram"
              class="hover:text-pink-500"
              ><svg
                class="w-5 h-5 inline"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5zm4.25 3.25a5.25 5.25 0 1 1 0 10.5 5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5zm5.13.88a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"
                /></svg
            ></a>
          </div>
        </div>
      </div>
      <div
        class="border-t border-gray-700 mt-8 pt-4 text-center text-gray-500 text-sm"
      >
        &copy; 2025 GGPCAR. Todos os direitos reservados.
      </div>
    </footer>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
    <script>
      // Substitua pelos seus próprios IDs do EmailJS
      const EMAILJS_USER_ID = "QdoIk2PwSo8xIrtcB";
      const EMAILJS_SERVICE_ID = "service_s80vqh5";
      const EMAILJS_TEMPLATE_ID = "template_6fd9chs";

      emailjs.init(EMAILJS_USER_ID);

      const form = document.getElementById("contact-form");
      const spinner = document.getElementById("spinner");
      const submitText = document.getElementById("submit-text");
      const formMessage = document.getElementById("form-message");

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        formMessage.textContent = "";
        spinner.classList.remove("hidden");
        submitText.textContent = "A enviar...";

        // Validação simples
        if (
          !form.from_name.value.trim() ||
          !form.reply_to.value.trim() ||
          !form.phone.value.trim() ||
          !form.car_model.value.trim() ||
          !form.message.value.trim()
        ) {
          spinner.classList.add("hidden");
          submitText.textContent = "Enviar";
          formMessage.textContent = "Por favor, preencha todos os campos.";
          formMessage.className = "text-center text-red-600 mt-4";
          return;
        }

        // Junta todos os dados do formulário ao início da mensagem antes de enviar
        const originalMessage = form.message.value;
        const userName = form.from_name.value;
        const userEmail = form.reply_to.value;
        const userPhone = form.phone.value;
        const userCar = form.car_model.value;
        form.message.value =
          `Nome: ${userName}\n` +
          `Email: ${userEmail}\n` +
          `Telemóvel: ${userPhone}\n` +
          `Viatura de Interesse: ${userCar}\n\n` +
          `Mensagem: ${originalMessage}`;

        emailjs
          .sendForm(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, form)
          .then(
            function () {
              spinner.classList.add("hidden");
              submitText.textContent = "Enviar";
              formMessage.textContent =
                "Mensagem enviada com sucesso! Entraremos em contacto em breve.";
              formMessage.className =
                "text-center text-green-600 mt-4 animate-fade-in";
              form.reset();
            },
            function (error) {
              spinner.classList.add("hidden");
              submitText.textContent = "Enviar";
              formMessage.textContent =
                "Ocorreu um erro ao enviar. Por favor, tente novamente.";
              formMessage.className =
                "text-center text-red-600 mt-4 animate-fade-in";
            }
          )
          .finally(function () {
            // Restaura o valor original da mensagem para não afetar o formulário após o reset
            form.message.value = originalMessage;
          });
      });
    </script>
    <style>
      .animate-fade-in {
        animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      /* Animação de rotação lenta para o logo */
      @keyframes spin-slow {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      /* Estilos personalizados para o botão de envio */
      #submit-btn {
        position: relative;
        overflow: hidden;
        transition: background-color 0.3s ease;
      }
      #submit-btn:hover {
        background-color: #2563eb;
      }
      #submit-btn:focus {
        outline: none;
        box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.4);
      }
      /* Estilos para o formulário de contacto */
      #contact-form {
        animation: fadeIn 0.6s ease-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      .animate-fade-in-up {
        animation: fadeInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      #chatbot-messages::-webkit-scrollbar {
        width: 6px;
        background: transparent;
      }
      #chatbot-messages::-webkit-scrollbar-thumb {
        background: #e5e7eb;
        border-radius: 3px;
      }
    </style>
    <!-- Chatbot Widget (igual ao da home) -->
    <div id="chatbot-widget" class="fixed bottom-6 right-6 z-50">
      <button
        id="chatbot-toggle"
        class="bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg w-14 h-14 flex items-center justify-center focus:outline-none transition"
      >
        <svg
          class="w-7 h-7"
          fill="none"
          stroke="currentColor"
          stroke-width="2.5"
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 20h9" />
          <circle
            cx="12"
            cy="10"
            r="7"
            stroke="currentColor"
            stroke-width="2"
            fill="none"
          />
          <circle cx="9" cy="9" r="1" fill="currentColor" />
          <circle cx="15" cy="9" r="1" fill="currentColor" />
          <path
            d="M9 13c.5.5 1.5 1 3 1s2.5-.5 3-1"
            stroke="currentColor"
            stroke-width="1.5"
            fill="none"
          />
        </svg>
      </button>
      <div
        id="chatbot-box"
        class="hidden bg-white rounded-xl shadow-2xl w-80 max-w-xs flex flex-col overflow-hidden animate-fade-in-up"
      >
        <div
          class="bg-blue-600 text-white px-4 py-3 flex items-center justify-between"
        >
          <span class="font-bold">GGPCAR Chat</span>
          <button
            id="chatbot-close"
            class="text-white hover:text-orange-400 focus:outline-none"
          >
            &times;
          </button>
        </div>
        <div
          id="chatbot-messages"
          class="flex-1 px-4 py-3 space-y-2 overflow-y-auto text-sm"
          style="max-height: 300px"
        >
          <div
            class="bg-gray-100 rounded-lg px-3 py-2 text-gray-700 self-start w-fit"
          >
            Olá! 👋<br />Como posso ajudar?
          </div>
        </div>
        <form id="chatbot-form" class="flex border-t border-gray-200">
          <input
            id="chatbot-input"
            type="text"
            autocomplete="off"
            placeholder="Escreva a sua mensagem..."
            class="flex-1 px-3 py-2 focus:outline-none"
          />
          <button
            type="submit"
            class="px-4 text-blue-600 font-bold hover:text-orange-400 transition"
          >
            Enviar
          </button>
        </form>
      </div>
    </div>
    <script>
      // Chatbot logic igual ao da home
      const chatbotToggle = document.getElementById("chatbot-toggle");
      const chatbotBox = document.getElementById("chatbot-box");
      const chatbotClose = document.getElementById("chatbot-close");
      const chatbotForm = document.getElementById("chatbot-form");
      const chatbotInput = document.getElementById("chatbot-input");
      const chatbotMessages = document.getElementById("chatbot-messages");

      chatbotToggle.addEventListener("click", () => {
        chatbotBox.classList.toggle("hidden");
        setTimeout(() => chatbotInput.focus(), 300);
      });
      chatbotClose.addEventListener("click", () => {
        chatbotBox.classList.add("hidden");
      });

      function getBotReply(message) {
        const msg = message.toLowerCase();
        if (msg.includes("horário") || msg.includes("abrem")) {
          return "Estamos abertos de segunda a sábado, das 9h às 19h.";
        }
        if (msg.includes("localização") || msg.includes("onde")) {
          return "Estamos localizados em Montemor-o-Velho, Portugal. Para mais detalhes, consulte a página de contacto.";
        }
        if (msg.includes("financiamento")) {
          return "Sim, oferecemos opções de financiamento flexíveis. Quer saber mais?";
        }
        if (msg.includes("test") || msg.includes("drive")) {
          return "Pode marcar um test-drive através do nosso formulário de contacto ou aqui mesmo!";
        }
        if (msg.includes("garantia")) {
          return "Todas as nossas viaturas incluem garantia. Para detalhes, pergunte pelo modelo desejado.";
        }
        if (
          msg.includes("olá") ||
          msg.includes("bom dia") ||
          msg.includes("boa tarde")
        ) {
          return "Olá! Como posso ajudar?";
        }
        if (msg.includes("email") || msg.includes("contacto")) {
          return "Pode contactar-nos pelo email: canoutlethelp@gmail.com ou pelo formulário no site.";
        }
        if (msg.includes("preço") || msg.includes("valor")) {
          return "Para informações de preços, consulte a secção de viaturas ou pergunte pelo modelo desejado.";
        }
        return "Obrigado pela sua mensagem! Em breve um dos nossos consultores irá responder.";
      }

      chatbotForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const userMsg = chatbotInput.value.trim();
        if (!userMsg) return;
        const userDiv = document.createElement("div");
        userDiv.className =
          "bg-blue-100 rounded-lg px-3 py-2 text-blue-900 self-end w-fit ml-auto";
        userDiv.textContent = userMsg;
        chatbotMessages.appendChild(userDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        setTimeout(() => {
          const botDiv = document.createElement("div");
          botDiv.className =
            "bg-gray-100 rounded-lg px-3 py-2 text-gray-700 self-start w-fit";
          botDiv.textContent = getBotReply(userMsg);
          chatbotMessages.appendChild(botDiv);
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }, 600);
        chatbotInput.value = "";
      });
    </script>
  </body>
</html>
